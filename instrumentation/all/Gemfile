# frozen_string_literal: true

# Copyright The OpenTelemetry Authors
#
# SPDX-License-Identifier: Apache-2.0

source 'https://rubygems.org'

gemspec

group :test do
  gem 'bundler', '~> 2.4'
  gem 'minitest', '~> 5.0'
  gem 'rake', '~> 13.0'
  gem 'rubocop', '~> 1.82.0'
  gem 'rubocop-performance', '~> 1.26.0'
  gem 'simplecov', '~> 0.22.0'
  gem 'yard', '~> 0.9'
  gem 'active_model_serializers'
  gem 'activesupport'
  if RUBY_VERSION >= '3.4'
    gem 'base64'
    gem 'mutex_m'
  end

  # Dynamically load all helper gems
  %w[mysql sql sql-obfuscation sql-processor].each do |dir|
    gem "opentelemetry-helpers-#{dir}", git: 'https://github.com/open-telemetry/opentelemetry-ruby-contrib.git', branch: 'main', glob: "helpers/#{dir}/*.gemspec"
  end

  # List all instrumentation directories
  instrumentation_dirs = %w[
    action_mailer action_pack action_view active_job active_model_serializers
    active_record active_storage active_support anthropic aws_lambda aws_sdk
    base bunny concurrent_ruby dalli delayed_job ethon excon factory_bot
    faraday grape graphql grpc gruf http http_client httpx koala lmdb
    mongo mysql2 net_http pg que racecar rack rails rake rdkafka redis
    resque restclient rspec ruby_kafka sidekiq sinatra trilogy
  ]
  instrumentation_dirs.each do |dir|
    gem "opentelemetry-instrumentation-#{dir}", git: 'https://github.com/open-telemetry/opentelemetry-ruby-contrib.git', branch: 'main', glob: "instrumentation/#{dir}/*.gemspec"
  end
end
